---
import lichtFeldLogo from '../assets/lichtfeld-logo.svg';
import { getCollection } from 'astro:content';

const base = import.meta.env.BASE_URL;
const currentPath = Astro.url.pathname;

const bounties = (await getCollection('bounty')).sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const latestBounty = bounties[0];
const latestBountyPath = latestBounty ? `${base}/bounty/${latestBounty.slug}` : `${base}/bounty/bounty2`;

const homeActiveClass = currentPath === base || currentPath === base + '/' ? 'active' : '';
const bountyActiveClass = currentPath.startsWith(`${base}/bounty/`) ? 'active' : '';

---

<header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
  <div class="container">
    <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
      <a href="#" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
        <img src={lichtFeldLogo.src} alt="LichtFeld Studio" style="height: 30px" />
      </a>
      <ul class="nav nav-pills">
        <li class="nav-item"><a href={base} class={`nav-link ${homeActiveClass}`}>Home</a></li>
        <li class="nav-item"><a href={latestBountyPath} class={`nav-link ${bountyActiveClass}`}>Bounties</a></li>
        <li class="nav-item"><a href="#" class="nav-link">Sponsoring</a></li>
        <li class="nav-item"><a href="#" class="nav-link">About</a></li>
      </ul>
    </div>
  </div>
</header>