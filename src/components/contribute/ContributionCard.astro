---
/**
 * A reusable UI component to display a single "contribution idea".
 * It is designed to be visually engaging, with a clear hierarchy of information
 * and interactive hover effects.
 *
 * Props:
 *  - idea: ContributionIdea â€” An object containing the card's data,
 *    sourced from a parsed GitHub issue.
 */
import type { ContributionIdea } from "@/services/github";

interface Props {
  idea: ContributionIdea;
}

const { idea } = Astro.props;
---

<div class="contribution-card">
  <!-- This link overlay makes the entire card clickable, while still allowing nested links to be interactive. -->
  <a
    href={idea.link}
    target="_blank"
    rel="noopener noreferrer"
    class="contribution-card__link-overlay"
    aria-label={`Learn more about ${idea.title}`}
  >
  </a>

  <!-- Optional header image for the card -->
  {
    idea.image && (
      <div class="contribution-card__image-container">
        <img src={idea.image} alt="" class="contribution-card__image" loading="lazy" />
      </div>
    )
  }

  <!-- Main content body of the card -->
  <div class="contribution-card__body">
    <h3 class="contribution-card__title">
      <a href={idea.link} target="_blank" rel="noopener noreferrer">{idea.title}</a>
    </h3>
    <div class="contribution-card__content" set:html={idea.bodyHtml} />
  </div>

  <!-- Card footer with a link to the corresponding GitHub issue -->
  <div class="contribution-card__footer">
    <a href={idea.issueUrl} target="_blank" rel="noopener noreferrer" class="contribution-card__issue-link">
      Discuss on GitHub
    </a>
  </div>
</div>

<style>
  /**
   * Defines the visual styling for the contribution card component, ensuring a
   * consistent and professional appearance.
   */
  .contribution-card {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%; /* Ensures cards in a row have equal height */
    background-color: #fff;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    transition:
      box-shadow 0.2s ease-in-out,
      transform 0.2s ease-in-out;
    overflow: hidden; /* Ensures child elements like the image conform to border-radius */
  }

  /* Enhance the card on hover to provide user feedback. */
  .contribution-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  }

  /* The link overlay sits behind other interactive elements (links, buttons) */
  .contribution-card__link-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
  }

  .contribution-card__image-container {
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    background-color: var(--body-background); /* Placeholder color for images */
  }

  .contribution-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  /* A subtle zoom effect on the image when the card is hovered. */
  .contribution-card:hover .contribution-card__image {
    transform: scale(1.05);
  }

  .contribution-card__body {
    padding: 1.25rem;
    flex-grow: 1; /* Allows the body to fill available vertical space */
  }

  .contribution-card__title {
    margin-top: 0;
    margin-bottom: 0.75rem;
    font-size: 1.25rem;
    font-weight: 600;
  }

  /* Ensure the title's link is clickable above the overlay. */
  .contribution-card__title a {
    color: var(--color-text);
    text-decoration: none;
    position: relative;
    z-index: 2;
  }

  .contribution-card__title a:hover {
    text-decoration: underline;
  }

  .contribution-card__content {
    color: #6c757d; /* Softer text color for the body */
    line-height: 1.6;
  }

  .contribution-card__content strong {
    color: var(--color-text);
  }

  /* Ensure links within the markdown body are clickable. */
  .contribution-card__content a {
    position: relative;
    z-index: 2;
  }

  .contribution-card__footer {
    padding: 0.75rem 1.25rem;
    background-color: var(--body-background);
    border-top: 1px solid var(--border-color);
    text-align: right;
    margin-top: auto; /* Pushes the footer to the bottom of the card */
  }

  .contribution-card__issue-link {
    font-size: 0.875rem;
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
    position: relative;
    z-index: 2; /* Ensure link is clickable */
  }

  .contribution-card__issue-link:hover {
    text-decoration: underline;
  }
</style>
