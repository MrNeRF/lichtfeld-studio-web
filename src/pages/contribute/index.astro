---
/**
 * The main "Contribute" page for the website.
 * This page dynamically fetches data from the project's GitHub repository at build time to display:
 * 1. A grid of contribution ideas, sourced from specially-labeled GitHub issues.
 * 2. A "face wall" of repository contributors to acknowledge their efforts.
 *
 * This approach ensures the content is always up-to-date with the repository's status.
 */
import Layout from "@/layouts/Layout.astro";
import ContributionCard from "@/components/contribute/ContributionCard.astro";
import ContributorsWall from "@/components/contribute/ContributorsWall.astro";
import { getContributionIdeas } from "@/services/github";
import { REPO_OWNER, CONTRIBUTION_IDEAS_REPO_NAME } from "@/constants/project";

// Fetch all required data from the GitHub API during the static build process.
const ideas = await getContributionIdeas();

// Construct the URL to the correct GitHub issues page.
const contributionIdeasRepoUrl = `https://github.com/${REPO_OWNER}/${CONTRIBUTION_IDEAS_REPO_NAME}/issues`;

// SEO metadata for the contribute page
const seoTitle = "Contribute";
const seoDescription =
  "Join the LichtFeld Studio community! Contribute code, share datasets, implement features, or fix bugs. See open contribution ideas and become a contributor.";
---

<Layout title={seoTitle} description={seoDescription}>
  <!-- Page Header / Hero Section -->
  <div class="container px-4 py-5 text-center">
    <h1 class="display-5 fw-bold text-body-emphasis">Get Involved</h1>
    <div class="col-lg-8 mx-auto">
      <p class="lead mb-4">
        Join our community of developers and researchers! Whether you want to share a dataset, implement a new feature,
        or fix a bug, your contributions are welcome. Here are a few ideas to get you started.
      </p>
    </div>
  </div>

  <!-- Contribution Ideas Grid Section -->
  <div class="container px-4 py-5" id="contribution-ideas">
    <h2 class="pb-2 border-bottom">How You Can Contribute</h2>
    {
      ideas.length > 0 ? (
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 py-5">
          {ideas.map((idea) => (
            <div class="col d-flex align-items-stretch">
              <ContributionCard idea={idea} />
            </div>
          ))}
        </div>
      ) : (
        <div class="alert alert-info mt-4" role="alert">
          <strong>No contribution ideas found.</strong> Check the
          <a href={contributionIdeasRepoUrl} class="alert-link" target="_blank">
            GitHub repository
          </a>{" "}
          for active issues!
        </div>
      )
    }
  </div>

  <!-- Contributor Wall Section -->
  <ContributorsWall />
</Layout>
