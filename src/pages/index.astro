---
/**
 * index.astro
 *
 * Homepage for LichtFeld Studio website.
 * Features:
 * - Interactive 3D Gaussian Splatting demo in the hero section
 * - Feature overview grid
 * - Support/donation section
 * - Contributors wall
 */
import Layout from "@/layouts/Layout.astro";
import { SITE } from "@/config/site.config";

import { SmartVideo } from "@alos-no/astro-media";
import Splat from "@/components/Splat.astro";
import ContributorsWall from "@/components/contribute/ContributorsWall.astro";

// Centralized external links (avoid magic strings):
import {
  GITHUB_REPO_URL,
  GITHUB_RELEASES_URL,
  GITHUB_WIKI_URL,
  GITHUB_SPONSORS_URL,
  DISCORD_URL,
  PAYPAL_URL,
  DONORBOX_URL,
  CRYPTO_WALLET_BITCOIN,
} from "@/constants/project";

const base = import.meta.env.BASE_URL;

// SEO metadata for the homepage
const seoTitle = SITE.name;
const seoDescription = SITE.description;
---

<Layout title={seoTitle} description={seoDescription}>
  <!-- Big Splat Header (Hero) -->
  <header class="hero">
    <div class="hero__splat">
      <!-- The Splat canvas is the visual anchor in the header -->
      <div class="splat-wrapper">
        <Splat
          scene="botanics"
          style="--preview-blur-px: 7px;"
          progressPosition="bottom-center"
          progressOffsetY={50}
          controlScheme="none"
        />
      </div>
    </div>

    <!-- Value proposition and CTAs overlayed above the splat -->
    <div class="hero__content">
      <!-- Backdrop panel -->
      <div class="container px-4">
        <div class="hero__stack">
          <!-- inner animated wrapper to avoid multiplying parent/child opacities -->
          <div class="hero__stack-content">
            <h1 class="hero__title">LichtFeld Studio</h1>

            <div class="hero__actions">
              <!-- Primary CTA: Download latest release -->
              <a
                class="btn btn-lg hero__download-link"
                href={GITHUB_RELEASES_URL}
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Download the latest LichtFeld Studio release"
              >
                <i class="bi bi-download mr-2" aria-hidden="true"></i>
                Download
              </a>
              <!-- Secondary CTA: Get Started (links to wiki for documentation/tutorials) -->
              <a
                class="btn btn-outline-light btn-lg hero__get-started-link"
                href={GITHUB_WIKI_URL}
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Open the LichtFeld Studio wiki documentation"
              >
                <i class="bi bi-book mr-2" aria-hidden="true"></i>
                Get Started
              </a>
              <!-- Tertiary CTA: Donate (scrolls to support section) -->
              <a
                class="btn btn-outline-light btn-lg hero__support-link"
                href="#support-the-project"
                aria-label="Scroll to support the project section"
              >
                <i class="bi bi-heart-fill mr-2" aria-hidden="true"></i>
                Donate
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Introduction -->
  <section class="intro-section container px-6 pt-14 pb-6">
    <div class="row items-center g-5">
      <div class="col-12 col-lg-6 order-2 order-lg-1">
        <!-- SmartVideo replaces the GIF with an MP4 for smaller payload and better LCP -->
        <!-- See: https://web.dev/articles/replace-gifs-with-videos -->
        <div class="intro-media">
          <div class="intro-video-wrapper">
            <SmartVideo
              src={`${base}videos/viewer_demo`}
              poster={`${base}videos/viewer_demo_poster.jpg`}
              class="rounded-2xl"
              sizeStrategy="fill"
            />
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-6 order-1 order-lg-2">
        <h2 class="text-3xl font-bold text-gray-900 leading-none mb-4">What is LichtFeld Studio?</h2>
        <p class="text-lg text-gray-600 mb-6">
          An all-in-one open-source studio for <b>3D Gaussian Splatting</b>. Train, edit, and render splats in a single
          desktop app. No cloud required.
        </p>

        <!-- Highlight badges -->
        <div class="intro-badges">
          <span class="intro-badge intro-badge--speed">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#lightning-charge-fill`}></use>
            </svg>
            2.4× Faster
          </span>
          <span class="intro-badge intro-badge--edit">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#vector-pen`}></use>
            </svg>
            Full Editing Suite
          </span>
          <span class="intro-badge intro-badge--offline">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#cloud-slash`}></use>
            </svg>
            Fully Offline
          </span>
          <span class="intro-badge intro-badge--open">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#unlock-fill`}></use>
            </svg>
            100% Open Source
          </span>
        </div>

        <p class="text-base text-gray-500 mt-6">
          Join the <a
            href={DISCORD_URL}
            class="link-offset-1 link-offset-1-hover link-underline link-underline-opacity-0 link-underline-opacity-100-hover"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Open the Discord community in a new tab"
          >
            community
          </a> and transform your 3D projects today!
        </p>
      </div>
    </div>
  </section>

  <!-- Feature List: Bento Grid Layout -->
  <section id="features">
    <div class="container px-6 pt-20 pb-12">
      <div class="text-center mb-8">
        <h2 class="text-4xl font-bold text-gray-900 mb-3">Features</h2>
        <p class="text-lg text-gray-500">Powerful by design. Built for performance.</p>
      </div>

      <div class="features-bento py-6">
        <!-- Hero row: 2 large cards -->
        <div class="bento-row bento-row--hero">
          <article class="bento-card bento-card--large bento-card--kernel">
            <div class="bento-card__icon" aria-hidden="true">
              <svg class="bi" width="2em" height="2em">
                <use href={`${base}static/bootstrap-icons.svg#cpu-fill`}></use>
              </svg>
            </div>
            <h3 class="bento-card__title">Built for Performance</h3>
            <p class="bento-card__desc">
              Custom CUDA kernel purpose-built from scratch for maximum efficiency and optimized memory usage.
            </p>
          </article>
          <article class="bento-card bento-card--large bento-card--editing">
            <div class="bento-card__icon" aria-hidden="true">
              <svg class="bi" width="2em" height="2em">
                <use href={`${base}static/bootstrap-icons.svg#vector-pen`}></use>
              </svg>
            </div>
            <h3 class="bento-card__title">Full Editing Suite</h3>
            <p class="bento-card__desc">
              Move, rotate, scale, and crop splats with brush, lasso, and polygon selection tools.
            </p>
          </article>
        </div>

        <!-- Medium row: 3 cards -->
        <div class="bento-row bento-row--medium">
          <article class="bento-card bento-card--speed">
            <div class="bento-card__icon" aria-hidden="true">
              <svg class="bi" width="1.5em" height="1.5em">
                <use href={`${base}static/bootstrap-icons.svg#speedometer2`}></use>
              </svg>
            </div>
            <h3 class="bento-card__title">2.4× Faster</h3>
            <p class="bento-card__desc">Optimized rendering pipeline that outperforms reference implementations.</p>
          </article>
          <article class="bento-card bento-card--opensource">
            <div class="bento-card__icon" aria-hidden="true">
              <svg class="bi" width="1.5em" height="1.5em">
                <use href={`${base}static/bootstrap-icons.svg#heart-fill`}></use>
              </svg>
            </div>
            <h3 class="bento-card__title">Free & Open Source</h3>
            <p class="bento-card__desc">GPL-3.0 licensed with fully transparent development.</p>
          </article>
          <article class="bento-card bento-card--masking">
            <div class="bento-card__icon" aria-hidden="true">
              <svg class="bi" width="1.5em" height="1.5em">
                <use href={`${base}static/bootstrap-icons.svg#layers-fill`}></use>
              </svg>
            </div>
            <h3 class="bento-card__title">Mask Support</h3>
            <p class="bento-card__desc">Isolate subjects with segment, ignore, and alpha modes.</p>
          </article>
        </div>

        <!-- Feature checklist row (no cards) -->
        <div class="bento-checklist">
          <span class="bento-check-item">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#intersect`}></use>
            </svg>
            Splat Composition
          </span>
          <span class="bento-check-item">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#clock-history`}></use>
            </svg>
            Save & Resume
          </span>
          <span class="bento-check-item">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#arrows-angle-contract`}></use>
            </svg>
            3-Point Align
          </span>
          <span class="bento-check-item">
            <svg class="bi" width="1em" height="1em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#palette`}></use>
            </svg>
            Modern UI
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- What's New Section (commented out)
  <section id="whats-new" class="whats-new-section">
    <div class="container px-6 pt-22 pb-12">
      <div class="row items-start g-5">
        <div class="col-12 col-lg-7">
          <div class="whats-new-video">
            <iframe
              src="https://www.youtube.com/embed/zWIzBHRc-60"
              title="What's New in LichtFeld Studio"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
            >
            </iframe>
          </div>
        </div>
        <div class="col-12 col-lg-5">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">What's New?</h2>
          <p class="text-lg text-gray-600 mb-12">
            LichtFeld Studio is evolving rapidly. Join our Discord server to stay up to date with the latest features,
            improvements, and community contributions.
          </p>
          <div class="whats-new-actions">
            <a href={GITHUB_RELEASES_URL} class="btn btn-primary btn-lg" target="_blank" rel="noopener noreferrer">
              <svg class="bi" width="1.25em" height="1.25em" aria-hidden="true">
                <use href={`${base}static/bootstrap-icons.svg#download`}></use>
              </svg>
              Download
            </a>
            <a href={DISCORD_URL} class="btn btn-outline-secondary btn-lg" target="_blank" rel="noopener noreferrer">
              <svg class="bi" width="1.25em" height="1.25em" aria-hidden="true">
                <use href={`${base}static/bootstrap-icons.svg#discord`}></use>
              </svg>
              Join the Community
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  -->

  <!-- Support / Donations (deeplink target) -->
  <section id="support-the-project" aria-labelledby="support-the-project-heading">
    <div class="container px-6 pt-12 pb-12">
      <div class="support-box">
        <div class="support-box__header">
          <div class="support-box__icon" aria-hidden="true">
            <svg class="bi" width="1.5em" height="1.5em">
              <use href={`${base}static/bootstrap-icons.svg#heart-fill`}></use>
            </svg>
          </div>
          <h2 id="support-the-project-heading" class="support-box__title">Support the Project</h2>
        </div>
        <p class="support-box__desc">
          Fund development and maintenance through your preferred platform. Every contribution helps keep the project
          alive and fund further research and development.
        </p>

        <!-- Amount Selection -->
        <div class="donate-amounts" role="radiogroup" aria-label="Select donation amount">
          <button type="button" class="donate-amount" data-amount="5" aria-pressed="false">$5</button>
          <button type="button" class="donate-amount" data-amount="10" aria-pressed="true">$10</button>
          <button type="button" class="donate-amount" data-amount="25" aria-pressed="false">$25</button>
          <button type="button" class="donate-amount" data-amount="100" aria-pressed="false">$100</button>
          <div class="donate-amount-custom">
            <span class="donate-amount-custom__prefix">$</span>
            <input
              type="number"
              class="donate-amount-custom__input"
              id="custom-amount"
              placeholder="Other"
              min="1"
              aria-label="Enter custom donation amount"
            />
          </div>
        </div>

        <!-- Provider Buttons -->
        <div class="donate-providers">
          <a
            class="donate-provider donate-provider--paypal"
            href={PAYPAL_URL}
            target="_blank"
            rel="noopener noreferrer"
            data-provider="paypal"
            data-base-url={PAYPAL_URL}
            aria-label="Donate via PayPal"
          >
            <svg class="bi" width="1.25em" height="1.25em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#paypal`}></use>
            </svg>
            PayPal
          </a>
          <a
            class="donate-provider donate-provider--donorbox"
            href={DONORBOX_URL}
            target="_blank"
            rel="noopener noreferrer"
            data-provider="donorbox"
            data-base-url={DONORBOX_URL}
            aria-label="Donate via DonorBox"
          >
            <svg class="bi" width="1.25em" height="1.25em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#gift-fill`}></use>
            </svg>
            DonorBox
          </a>
          <a
            class="donate-provider donate-provider--github"
            href={GITHUB_SPONSORS_URL}
            target="_blank"
            rel="noopener noreferrer"
            data-provider="github"
            aria-label="Sponsor on GitHub"
          >
            <svg class="bi" width="1.25em" height="1.25em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#github`}></use>
            </svg>
            GitHub Sponsors
          </a>
          <button
            type="button"
            class="donate-provider donate-provider--bitcoin"
            data-provider="bitcoin"
            data-wallet={CRYPTO_WALLET_BITCOIN}
            aria-label="Copy Bitcoin wallet address"
          >
            <svg class="bi" width="1.25em" height="1.25em" aria-hidden="true">
              <use href={`${base}static/bootstrap-icons.svg#currency-bitcoin`}></use>
            </svg>
            Bitcoin
          </button>
        </div>

        <!-- Bitcoin wallet popup (hidden by default) -->
        <div class="donate-bitcoin-popup" id="bitcoin-popup" aria-hidden="true">
          <div class="donate-bitcoin-popup__content">
            <p class="donate-bitcoin-popup__label">Bitcoin Wallet Address</p>
            <div class="donate-bitcoin-popup__address">
              <code id="btc-wallet-display">{CRYPTO_WALLET_BITCOIN}</code>
              <button
                type="button"
                class="donate-bitcoin-popup__copy"
                id="copy-btc-btn"
                aria-label="Copy wallet address"
              >
                <svg class="bi" width="1em" height="1em" aria-hidden="true">
                  <use href={`${base}static/bootstrap-icons.svg#clipboard`}></use>
                </svg>
              </button>
            </div>
            <p class="donate-bitcoin-popup__hint" id="btc-copy-status">Click to copy</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contributors (reusable component, fetched at build time) -->
  <section class="contributors-section">
    <ContributorsWall />
  </section>
</Layout>

<script>
  /**
   * Manages the visibility of the hero content based on the Splat viewer's state.
   * - Fades out the hero content only when the user clicks/drags on the viewer.
   * - Ignores scroll/wheel events to prevent accidental fade-out during page scroll.
   * - Fades it back in 10 seconds after the viewer becomes idle.
   * - Resets the fade-in timer if the user becomes active again.
   */
  document.addEventListener("DOMContentLoaded", () => {
    // Find the hero content element to apply the fade effect.
    const heroContent = document.querySelector(".hero__content");
    if (!heroContent) {
      console.warn("Hero content element (.hero__content) not found.");
      return;
    }

    // Find the splat wrapper to track click interactions.
    const splatWrapper = document.querySelector(".splat-wrapper");

    // A timer ID for the delayed fade-in when the viewer goes idle.
    let fadeInTimerId: number | null = null;

    // Track whether the user has explicitly clicked on the splat viewer.
    // This prevents scroll/wheel events from triggering the fade-out.
    let userClickedOnViewer = false;

    // Listen for pointerdown on the splat wrapper to detect explicit clicks.
    if (splatWrapper) {
      splatWrapper.addEventListener("pointerdown", () => {
        console.debug("[Hero] pointerdown on splat-wrapper - setting userClickedOnViewer=true");
        userClickedOnViewer = true;
      });
    }

    // Listen for the custom event dispatched when the viewer becomes active (user interaction).
    document.addEventListener("splatviewer:active", () => {
      console.debug("[Hero] splatviewer:active received, userClickedOnViewer=", userClickedOnViewer);

      // Only fade out if the user explicitly clicked on the viewer.
      // This prevents scroll/wheel events from hiding the hero content.
      if (!userClickedOnViewer) {
        console.debug("[Hero] userClickedOnViewer is false - NOT hiding hero");

        return;
      }

      // If a fade-in was scheduled, cancel it because the user is active again.
      if (fadeInTimerId) {
        clearTimeout(fadeInTimerId);
        fadeInTimerId = null;
      }

      console.debug("[Hero] hiding hero content");

      // Apply the CSS class to fade out the hero content.
      heroContent.classList.add("is-viewer-active");
    });

    // Timer for debouncing the userClickedOnViewer reset.
    // This prevents race conditions where splatviewer:idle fires between
    // pointerdown and click, resetting the flag too early.
    let clickResetTimerId: number | null = null;

    // Listen for the custom event dispatched when the viewer goes idle.
    document.addEventListener("splatviewer:idle", () => {
      console.debug("[Hero] splatviewer:idle received");

      // Debounce the flag reset to allow click handlers to fire first.
      // The issue: pointerdown triggers page activity → restartIdleAnimation
      // → splatviewer:idle is dispatched BEFORE the click handler fires.
      // By debouncing, we give the click handler time to check the flag.
      if (clickResetTimerId) {
        clearTimeout(clickResetTimerId);
      }

      clickResetTimerId = window.setTimeout(() => {
        console.debug("[Hero] resetting userClickedOnViewer=false (debounced)");
        userClickedOnViewer = false;
        clickResetTimerId = null;
      }, 50);

      // Schedule the hero content to fade back in after a 10-second delay.
      const FADE_IN_DELAY_MS = 10000;

      console.debug(`[Hero] Scheduling fade-in in ${FADE_IN_DELAY_MS}ms.`);

      fadeInTimerId = window.setTimeout(() => {
        heroContent.classList.remove("is-viewer-active");

        console.debug("Fade-in completed. Hero content is now visible.");
        fadeInTimerId = null; // Clear the timer ID after it has run.
      }, FADE_IN_DELAY_MS);
    });

    /**
     * Adds copy-to-clipboard functionality for the Bitcoin wallet address.
     */
    const copyBtn = document.getElementById("copy-btc-address-btn");
    const btcAddressInput = document.getElementById("btc-wallet-address");

    if (copyBtn && btcAddressInput instanceof HTMLInputElement) {
      copyBtn.addEventListener("click", () => {
        navigator.clipboard
          .writeText(btcAddressInput.value)
          .then(() => {
            // Provide visual feedback on successful copy
            const originalIcon = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="bi bi-check-lg"></i>';
            copyBtn.disabled = true;

            setTimeout(() => {
              copyBtn.innerHTML = originalIcon;
              copyBtn.disabled = false;
            }, 2000);
          })
          .catch((err) => {
            console.error("Failed to copy Bitcoin address: ", err);
            // Optionally, provide an error message to the user here.
          });
      });
    }

    /**
     * Robustly handles scrolling to a URL fragment/hash on page load.
     * This ensures that anchor links work reliably even if default browser
     * behavior is interrupted by other scripts or slow-loading resources.
     */
    if (window.location.hash) {
      // Use a small timeout to allow the layout to settle, especially
      // if there are heavy components like the splat viewer.
      setTimeout(() => {
        try {
          const targetElement = document.querySelector(window.location.hash);
          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        } catch (e) {
          console.warn(`Failed to scroll to hash "${window.location.hash}":`, e);
        }
      }, 100); // A 100ms delay is usually sufficient.
    }
  });

  /**
   * Donation Box Interactivity
   * - Handles amount selection (preset buttons and custom input)
   * - Updates provider URLs with selected amount
   * - Manages Bitcoin wallet popup and copy functionality
   */
  (function setupDonationBox() {
    // Amount selection elements
    const amountButtons = document.querySelectorAll<HTMLButtonElement>(".donate-amount");
    const customInput = document.getElementById("custom-amount") as HTMLInputElement | null;

    // Provider elements
    const paypalLink = document.querySelector<HTMLAnchorElement>('[data-provider="paypal"]');
    const donorboxLink = document.querySelector<HTMLAnchorElement>('[data-provider="donorbox"]');
    const bitcoinBtn = document.querySelector<HTMLButtonElement>('[data-provider="bitcoin"]');

    // Bitcoin popup elements
    const bitcoinPopup = document.getElementById("bitcoin-popup");
    const copyBtcBtn = document.getElementById("copy-btc-btn");
    const btcCopyStatus = document.getElementById("btc-copy-status");
    const btcWalletDisplay = document.getElementById("btc-wallet-display");

    // Track the currently selected amount (default: $10)
    let selectedAmount = 10;

    /**
     * Updates the visual state of amount buttons.
     */
    function updateAmountSelection(activeButton: HTMLButtonElement | null) {
      amountButtons.forEach((btn) => {
        btn.setAttribute("aria-pressed", "false");
      });

      if (activeButton) {
        activeButton.setAttribute("aria-pressed", "true");
      }

      // Clear custom input if a preset is selected
      if (activeButton && customInput) {
        customInput.value = "";
      }
    }

    /**
     * Updates the provider URLs with the current amount.
     */
    function updateProviderUrls() {
      // PayPal: append amount to URL (PayPal.me supports /amount format)
      if (paypalLink) {
        const baseUrl = paypalLink.dataset.baseUrl || "";
        paypalLink.href = `${baseUrl}/${selectedAmount}`;
      }

      // DonorBox: use query parameter for amount
      if (donorboxLink) {
        const baseUrl = donorboxLink.dataset.baseUrl || "";
        donorboxLink.href = `${baseUrl}?amount=${selectedAmount}`;
      }
    }

    // Set up preset amount button clicks
    amountButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const amount = parseInt(btn.dataset.amount || "10", 10);
        selectedAmount = amount;
        updateAmountSelection(btn);
        updateProviderUrls();
      });
    });

    // Set up custom amount input
    if (customInput) {
      customInput.addEventListener("input", () => {
        const value = parseInt(customInput.value, 10);
        if (value > 0) {
          selectedAmount = value;
          updateAmountSelection(null); // Deselect all preset buttons
          updateProviderUrls();
        }
      });

      customInput.addEventListener("focus", () => {
        updateAmountSelection(null); // Deselect presets when focusing custom input
      });
    }

    // Bitcoin button: toggle popup
    if (bitcoinBtn && bitcoinPopup) {
      bitcoinBtn.addEventListener("click", () => {
        const isHidden = bitcoinPopup.getAttribute("aria-hidden") === "true";
        bitcoinPopup.setAttribute("aria-hidden", isHidden ? "false" : "true");
      });
    }

    // Copy Bitcoin address
    if (copyBtcBtn && btcWalletDisplay && btcCopyStatus) {
      copyBtcBtn.addEventListener("click", async () => {
        const address = btcWalletDisplay.textContent || "";
        try {
          await navigator.clipboard.writeText(address);
          btcCopyStatus.textContent = "Copied!";
          btcCopyStatus.classList.add("copied");

          // Reset after 2 seconds
          setTimeout(() => {
            btcCopyStatus.textContent = "Click to copy";
            btcCopyStatus.classList.remove("copied");
          }, 2000);
        } catch (err) {
          console.error("Failed to copy:", err);
          btcCopyStatus.textContent = "Failed to copy";
        }
      });
    }

    // Initialize with default amount
    updateProviderUrls();
  })();
</script>

<style>
  /* ===========================
    * Hero / Big Splat Header
    * =========================== */

  .splat-wrapper {
    width: 100%;
    position: relative;
    height: 100%;

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      cursor: grab;
      pointer-events: auto;
    }
  }

  .hero {
    position: relative;
    isolation: isolate; /* Ensure overlay stacking is predictable */
    min-height: clamp(420px, 55vh, 720px);
    display: grid;
    align-items: center;
    overflow: clip; /* Contain the canvas */
    background: #0b0c10; /* Fallback tone under the canvas */
    /* --- Fade timing tokens (show vs. hide) --- */
    --hero-fade-duration: 2s; /* default fade-in duration */
    --hero-fade-ease: ease-in-out; /* default easing */
    --hero-visibility-delay: 0s; /* no delay when becoming visible */
  }

  .hero__splat {
    position: absolute;
    inset: 0;
  }

  .hero__content {
    position: relative;
    z-index: 3; /* Above the loader (z=1) so title/buttons remain visible and on top */
    color: var(--color-text-light);

    /* Let clicks reach the canvas unless the user interacts with explicit controls */
    pointer-events: none;
  }

  /* State class toggles timing tokens; the actual fade happens on
   .hero__stack-content and the glass (::before). */
  .hero__content.is-viewer-active {
    /* Override timing for the hide case only */
    --hero-fade-duration: 0.4s;
    /* NOTE: We do not toggle visibility here to avoid the “instant show”
       behavior of visibility on the fade-in path. */
  }

  /* Prevent the bootstrap .container from re-enabling hit-testing */
  .hero__content .container {
    pointer-events: none;
    /* Center the inline-flex .hero__stack element within the container */
    text-align: center;
  }

  /* Lightweight wrapper around the textual hero content.
     The frosted, light panel is implemented on ::before so it tracks the content’s box */
  .hero__stack {
    position: relative;
    display: inline-flex;
    flex-direction: column;
    align-items: center; /* Center content (title, buttons) horizontally */
    gap: 0.5rem;

    /* Make spacing responsive so it fits phones and large screens without overflow. */
    padding-block: clamp(2rem, 8vh, 5.5rem);
    padding-inline: clamp(1rem, 6vw, 12rem);
  }

  /* animated inner wrapper for text/buttons */
  .hero__stack-content {
    opacity: 1;
    transform: translateY(0);
    transition:
      opacity var(--hero-fade-duration) var(--hero-fade-ease),
      transform var(--hero-fade-duration) var(--hero-fade-ease);
  }

  .hero__content.is-viewer-active .hero__stack-content {
    opacity: 0;
    transform: translateY(20px);
  }

  /* Frosted, light panel with elegant radial edge fade that keeps most of the splat visible. */
  .hero__stack::before {
    content: "";
    position: absolute;
    inset: -3rem -10rem; /* visual halo around content */
    background: rgba(230, 230, 230, 0.1); /* light/clean tone over dark imagery */
    /* Use backdrop-filter when supported for tasteful glassmorphism without obscuring the splat */
    backdrop-filter: saturate(150%) blur(5px);
    pointer-events: none; /* never block canvas or buttons */
    /* Elegant edge fade so the splat remains prominent around the content */
    -webkit-mask-image: radial-gradient(ellipse farthest-side, rgba(0, 0, 0, 1) 35%, rgba(0, 0, 0, 0) 100%);
    mask-image: radial-gradient(ellipse farthest-side, rgba(0, 0, 0, 1) 35%, rgba(0, 0, 0, 0) 100%);
    /* Let the panel animate on both show/hide (visibility is controlled on the parent). */
    opacity: 1;
    transition:
      opacity var(--hero-fade-duration) var(--hero-fade-ease),
      backdrop-filter var(--hero-fade-duration) var(--hero-fade-ease);
  }

  /* When the viewer is active, fade out the frosted background with the faster duration. */
  .hero__content.is-viewer-active .hero__stack::before {
    opacity: 0;
    /* Animate the filter back to a neutral state (no blur, normal saturation). */
    backdrop-filter: saturate(150%) blur(0px);
  }

  /* Graceful fallback when backdrop-filter isn’t available */
  @supports not (backdrop-filter: blur(1px)) {
    .hero__stack::before {
      background: rgba(255, 255, 255, 0.28);
      /* Slightly stronger mask and shadow to compensate for lack of blur */
      -webkit-mask-image: radial-gradient(ellipse farthest-side, rgba(0, 0, 0, 1) 68%, rgba(0, 0, 0, 0) 100%);
      mask-image: radial-gradient(ellipse farthest-side, rgba(0, 0, 0, 1) 68%, rgba(0, 0, 0, 0) 100%);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.22);
    }
  }

  .hero__title {
    font-size: clamp(2rem, 5vw, 3.25rem);
    position: relative; /* Establish a new stacking context */
  }

  .hero__actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    margin-top: 1rem;
    position: relative; /* Establish a new stacking context */
    /* Re-enable pointer events for the buttons, as the parent `.hero__content`
       disables them to allow clicks to pass through to the splat canvas. */
    pointer-events: auto;
  }

  /* When the viewer is active and the buttons are faded out, disable their pointer
     events to prevent invisible elements from being clickable. */
  .hero__content.is-viewer-active .hero__actions {
    pointer-events: none;
  }

  /* Download button with solid blue background (primary CTA) */
  .hero__download-link {
    border: 1px solid #0d6efd;
    color: #fff;
    background: #0d6efd;
  }

  .hero__download-link:hover {
    border-color: #3d8bfd;
    color: #fff;
    background: #3d8bfd;
  }

  /* Ensure the secondary CTA is visible over dark gradients */
  .hero__support-link {
    background: rgba(99, 102, 241, 0.25);
    border-color: rgba(165, 180, 252, 0.5);
    color: #fff;
  }

  .hero__support-link:hover {
    background: rgba(99, 102, 241, 0.4);
    border-color: rgba(165, 180, 252, 0.8);
    color: #fff;
  }

  /* Get Started button with semi-transparent green background */
  .hero__get-started-link {
    border-color: rgba(40, 167, 69, 0.8);
    color: #fff;
    background: rgba(40, 167, 69, 0.75);
  }

  .hero__get-started-link:hover {
    border-color: rgba(40, 167, 69, 1);
    color: #fff;
    background: rgba(40, 167, 69, 0.65);
  }

  /* Consistent spacing for inline Bootstrap Icons in buttons/links */
  .bi {
    vertical-align: -0.125em;
  }
  .btn .bi {
    margin-right: 0.4rem;
  }

  /* ===========================
    * Features — modern card look
    * =========================== */
  .features-grid .col {
    display: flex;
  }

  .feature-card {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    width: 100%;
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    padding: 1rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
    transition:
      transform 0.16s ease,
      box-shadow 0.16s ease;
  }

  .feature-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.08);
  }

  .feature-card__icon {
    flex: 0 0 auto;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(120, 80, 163, 0.08);
    box-shadow: inset 0 0 0 1px rgba(120, 80, 163, 0.25);
  }

  /* Ensure icon inside the badge is crisp and readable */
  #features .feature-card .bi {
    opacity: 1;
  }

  /* Respect reduced-motion preferences for hover/focus microinteractions */
  @media (prefers-reduced-motion: reduce) {
    .feature-card {
      transition: none;
    }
    .feature-card:hover {
      transform: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
    }
  }

  /* Responsive tweaks */
  @media (max-width: 991.98px) {
    .hero__lead {
      max-width: 100%;
    }
    .hero__stack {
      align-items: center;
      text-align: center;
    }
    /* The .hero__stack panel scales with content; no fixed viewport panel needed anymore. */
  }

  /* Tablet: stack hero buttons in column layout */
  @media (max-width: 991.98px) {
    .hero__actions {
      flex-direction: column;
      align-items: stretch;
      gap: 0.5rem;
    }

    .hero__actions .btn {
      width: 100%;
      padding: 0.625rem 1.25rem;
      font-size: 0.9375rem;
    }
  }

  /* Additional narrow-phone tweaks: tighten padding and reduce button size */
  @media (max-width: 575.98px) {
    .hero__stack {
      padding-block: clamp(1.25rem, 6vh, 2.5rem);
      padding-inline: clamp(0.75rem, 5vw, 1.5rem);
    }

    .hero__actions .btn {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
  }

  /* Narrower container for features section */
  #features .container {
    max-width: 1180px;
  }

  /* Match support section container width to features section */
  #support-the-project .container {
    max-width: 1180px;
  }

  /* Match contributors section container width to features section */
  .contributors-section :global(.container) {
    max-width: 1180px;
    text-align: center;
  }

  /* ===========================
   * Intro Section Enhancements
   * =========================== */

  /* Highlight badges row */
  .intro-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.625rem;
  }

  .intro-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.375rem 0.75rem;
    font-size: 0.8125rem;
    font-weight: 600;
    border-radius: 9999px;
    white-space: nowrap;
  }

  .intro-badge .bi {
    font-size: 0.9rem;
  }

  /* Badge color variants */
  .intro-badge--speed {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.15), rgba(255, 152, 0, 0.15));
    color: #b86e00;
    border: 1px solid rgba(255, 152, 0, 0.3);
  }

  .intro-badge--edit {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(99, 102, 241, 0.12));
    color: #6d28d9;
    border: 1px solid rgba(139, 92, 246, 0.25);
  }

  .intro-badge--offline {
    background: linear-gradient(135deg, rgba(100, 116, 139, 0.12), rgba(71, 85, 105, 0.12));
    color: #475569;
    border: 1px solid rgba(100, 116, 139, 0.25);
  }

  .intro-badge--open {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(14, 165, 233, 0.12));
    color: #1d4ed8;
    border: 1px solid rgba(59, 130, 246, 0.25);
  }

  /* Intro media wrapper with subtle styling */
  .intro-media {
    position: relative;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.08),
      0 8px 16px rgba(0, 0, 0, 0.04);
  }

  .intro-video-wrapper {
    position: relative;
    width: 100%;
    /* Aspect ratio 600:338 ≈ 16:9 */
    aspect-ratio: 600 / 338;
  }

  .intro-media img {
    display: block;
    width: 100%;
    height: auto;
  }

  /* ===========================
   * Bento Grid Feature Layout
   * =========================== */

  .features-bento {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .bento-row {
    display: grid;
    gap: 1rem;
    margin-inline: 2rem;
  }

  .bento-row--hero {
    grid-template-columns: repeat(2, 1fr);
  }

  .bento-row--medium {
    grid-template-columns: repeat(3, 1fr);
  }

  .bento-row--small {
    grid-template-columns: repeat(4, 1fr);
  }

  .bento-card {
    padding: 1.5rem;
    border-radius: 1rem;
    background: #ffffff;
    position: relative;
    /* No border - gradient pseudo-element provides it */
    border: none;
    /* Multi-layer soft shadow for subtle depth */
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.04),
      0 4px 8px rgba(0, 0, 0, 0.04),
      0 8px 16px rgba(0, 0, 0, 0.02);
    transition:
      transform 0.25s cubic-bezier(0.33, 1, 0.68, 1),
      box-shadow 0.25s cubic-bezier(0.33, 1, 0.68, 1);
  }

  /* Gradient border via pseudo-element */
  .bento-card::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(168, 85, 247, 0.15), rgba(59, 130, 246, 0.15));
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    transition: background 0.3s ease;
  }

  .bento-card:hover {
    transform: translateY(-4px);
    box-shadow:
      0 8px 24px rgba(99, 102, 241, 0.08),
      0 12px 24px rgba(0, 0, 0, 0.04),
      0 24px 48px rgba(0, 0, 0, 0.03);
  }

  .bento-card:hover::before {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.35), rgba(168, 85, 247, 0.25), rgba(59, 130, 246, 0.2));
  }

  .bento-card__icon {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    margin-bottom: 0.75rem;
    position: relative;
  }

  /* Soft glowing dot behind icons */
  .bento-card__icon::before {
    content: "";
    position: absolute;
    width: 2.25rem;
    height: 2.25rem;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(99, 102, 241, 0.12) 0%, transparent 70%);
    left: -0.25rem;
    top: 50%;
    transform: translateY(-50%);
    z-index: 0;
  }

  /* Accent-colored icons (default indigo) */
  .bento-card__icon svg {
    fill: #4f46e5;
    color: #4f46e5;
    position: relative;
    z-index: 1;
  }

  /* Card-specific icon colors */
  .bento-card--kernel .bento-card__icon svg {
    fill: #7c3aed;
    color: #7c3aed; /* Violet for CUDA/tech */
  }
  .bento-card--kernel .bento-card__icon::before {
    background: radial-gradient(circle, rgba(124, 58, 237, 0.12) 0%, transparent 70%);
  }

  .bento-card--editing .bento-card__icon svg {
    fill: #8b5cf6;
    color: #8b5cf6; /* Purple for creative/editing */
  }
  .bento-card--editing .bento-card__icon::before {
    background: radial-gradient(circle, rgba(139, 92, 246, 0.12) 0%, transparent 70%);
  }

  .bento-card--speed .bento-card__icon svg {
    fill: #059669;
    color: #059669; /* Emerald for speed/performance */
  }
  .bento-card--speed .bento-card__icon::before {
    background: radial-gradient(circle, rgba(5, 150, 105, 0.12) 0%, transparent 70%);
  }

  .bento-card--opensource .bento-card__icon svg {
    fill: #dc2626;
    color: #dc2626; /* Red for heart/open source */
  }
  .bento-card--opensource .bento-card__icon::before {
    background: radial-gradient(circle, rgba(220, 38, 38, 0.12) 0%, transparent 70%);
  }

  .bento-card--masking .bento-card__icon svg {
    fill: #0d9488;
    color: #0d9488; /* Deep teal for masking/layers */
  }
  .bento-card--masking .bento-card__icon::before {
    background: radial-gradient(circle, rgba(13, 148, 136, 0.12) 0%, transparent 70%);
  }

  .bento-card__title {
    font-weight: 650;
    margin-bottom: 0.5rem;
    color: #111827;
  }

  .bento-card__desc {
    font-size: 0.875rem;
    color: var(--bs-secondary-color);
    margin: 0;
    line-height: 1.5;
  }

  /* Large hero cards */
  .bento-card--large {
    padding: 2rem;
  }

  .bento-card--large .bento-card__icon {
    margin-bottom: 1rem;
  }
  .bento-card--large .bento-card__icon::before {
    width: 3.25rem;
    height: 3.25rem;
    left: -0.5rem;
  }
  .bento-card--large .bento-card__icon svg {
    width: 32px;
    height: 32px;
  }

  .bento-card--large .bento-card__title {
    font-size: 1.375rem;
    margin-bottom: 0.625rem;
  }

  .bento-card--large .bento-card__desc {
    font-size: 0.9375rem;
  }

  /* Feature checklist row */
  .bento-checklist {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    padding-top: 1.5rem;
    padding-inline: 1rem;
    margin: 0 6rem;
  }

  .bento-check-item {
    display: inline-flex;
    align-items: center;
    gap: 0.625rem;
    font-size: 1.125rem;
    font-weight: 600;
    color: #1f2937;
  }

  .bento-check-item svg {
    color: #4f46e5;
    flex-shrink: 0;
    width: 1.25em;
    height: 1.25em;
  }

  /* Responsive bento grid - tablet */
  @media (max-width: 991.98px) {
    .features-bento {
      max-width: 740px;
      margin-inline: auto;
    }
    .bento-row--hero,
    .bento-row--medium {
      grid-template-columns: 1fr;
    }
    .bento-checklist {
      justify-content: center;
      gap: 1rem 2rem;
      margin: 0;
    }
  }

  /* Smaller mobile adjustments */
  @media (max-width: 575.98px) {
    .features-bento {
      max-width: 100%;
    }
    .bento-card {
      padding: 1.25rem;
    }
    .bento-card--large {
      padding: 1.5rem;
    }
    .bento-card--large .bento-card__title {
      font-size: 1.25rem;
    }
    .bento-checklist {
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      padding-inline: 1rem;
    }
    .bento-check-item {
      font-size: 1rem;
    }
  }

  /* Reduced motion for bento */
  @media (prefers-reduced-motion: reduce) {
    .bento-card {
      transition: none;
    }
    .bento-card:hover {
      transform: none;
    }
  }

  /* ===========================
   * Section dividers (SVG arcs)
   * =========================== */

  /* Full-width gentle arc divider between sections */
  .section-divider {
    width: 100%;
    line-height: 0;
    overflow: hidden;
  }

  .section-divider svg {
    display: block;
    width: 100%;
    height: 32px;
  }

  /* Responsive arc height */
  @media (min-width: 768px) {
    .section-divider svg {
      height: 48px;
    }
  }

  /* ===========================
   * What's New Section
   * =========================== */

  .whats-new-section {
  }

  .whats-new-video {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    border-radius: 1rem;
    overflow: hidden;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -2px rgba(0, 0, 0, 0.1);
  }

  .whats-new-video iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }

  .whats-new-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.25rem;
    max-width: 280px;
    margin: 0 auto;
  }

  .whats-new-actions .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-weight: 600;
    padding: 0.875rem 1.5rem;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
    width: 100%;
  }

  .whats-new-actions .btn-primary {
    background: linear-gradient(135deg, #4f46e5, #6366f1);
    border: none;
    color: white;
  }

  .whats-new-actions .btn-primary:hover {
    background: linear-gradient(135deg, #4338ca, #4f46e5);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
  }

  .whats-new-actions .btn-outline-secondary {
    background: transparent;
    border: 2px solid #e2e8f0;
    color: #475569;
  }

  .whats-new-actions .btn-outline-secondary:hover {
    background: #f1f5f9;
    border-color: #cbd5e1;
    transform: translateY(-2px);
  }

  /* ===========================
   * Support the Project Box
   * =========================== */

  .support-box {
    background: linear-gradient(145deg, #ffffff 0%, #f0f4f8 100%);
    border-radius: 1.5rem;
    padding: 2.5rem;
    margin-inline: 2rem;
    border: 2px solid rgba(99, 102, 241, 0.2);
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.08),
      0 2px 4px -2px rgba(0, 0, 0, 0.05),
      0 12px 32px -8px rgba(99, 102, 241, 0.12);
  }

  .support-box__header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }

  .support-box__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 0.75rem;
    background: linear-gradient(135deg, #6366f1, #4f46e5);
    color: white;
  }

  .support-box__icon svg {
    fill: currentColor;
  }

  .support-box__title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
    margin: 0;
  }

  .support-box__desc {
    color: #475569;
    font-size: 1rem;
    margin-bottom: 1.5rem;
    max-width: 600px;
    margin-inline: auto;
    text-align: center;
  }

  /* Override card styles inside support box */
  .support-box .card {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(100, 116, 139, 0.1);
  }

  .support-box .btn-primary {
    background: linear-gradient(135deg, #4f46e5, #6366f1);
    border: none;
  }

  .support-box .btn-primary:hover {
    background: linear-gradient(135deg, #4338ca, #4f46e5);
  }

  @media (max-width: 767.98px) {
    .support-box {
      padding: 1.5rem;
      border-radius: 1rem;
    }

    .support-box__title {
      font-size: 1.25rem;
    }
  }

  /* ===========================
   * Donation Amount Selector
   * =========================== */

  .donate-amounts {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }

  .donate-amount {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 4.5rem;
    padding: 0.75rem 1.25rem;
    font-size: 1rem;
    font-weight: 600;
    color: #475569;
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 0.75rem;
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .donate-amount:hover {
    border-color: #a5b4fc;
    background: #f8fafc;
  }

  .donate-amount[aria-pressed="true"] {
    background: linear-gradient(135deg, #4f46e5, #6366f1);
    border-color: transparent;
    color: white;
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
  }

  .donate-amount-custom {
    display: flex;
    align-items: center;
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 0.75rem;
    padding-left: 0.75rem;
    transition: all 0.15s ease;
  }

  .donate-amount-custom:focus-within {
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
  }

  .donate-amount-custom__prefix {
    font-weight: 600;
    color: #64748b;
  }

  .donate-amount-custom__input {
    width: 5rem;
    padding: 0.75rem 0.5rem;
    font-size: 1rem;
    font-weight: 600;
    color: #1e293b;
    background: transparent;
    border: none;
    outline: none;
  }

  .donate-amount-custom__input::placeholder {
    color: #94a3b8;
    font-weight: 500;
  }

  /* Hide number input spinners */
  .donate-amount-custom__input::-webkit-outer-spin-button,
  .donate-amount-custom__input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  .donate-amount-custom__input[type="number"] {
    -moz-appearance: textfield;
  }

  /* ===========================
   * Donation Provider Buttons
   * =========================== */

  .donate-providers {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
  }

  .donate-provider {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 1.5rem;
    font-size: 0.9375rem;
    font-weight: 600;
    text-decoration: none;
    border-radius: 0.75rem;
    border: none;
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .donate-provider svg {
    flex-shrink: 0;
    fill: currentColor;
  }

  /* PayPal - Blue */
  .donate-provider--paypal {
    background: #0070ba;
    color: white;
  }
  .donate-provider--paypal:hover {
    background: #005ea6;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 112, 186, 0.3);
  }

  /* DonorBox - Teal/Green */
  .donate-provider--donorbox {
    background: #28a745;
    color: white;
  }
  .donate-provider--donorbox:hover {
    background: #218838;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
  }

  /* GitHub - Dark */
  .donate-provider--github {
    background: #24292f;
    color: white;
  }
  .donate-provider--github:hover {
    background: #1b1f23;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(36, 41, 47, 0.3);
  }

  /* Bitcoin - Orange */
  .donate-provider--bitcoin {
    background: #f7931a;
    color: white;
  }
  .donate-provider--bitcoin:hover {
    background: #e8850f;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(247, 147, 26, 0.3);
  }

  /* ===========================
   * Bitcoin Popup
   * =========================== */

  .donate-bitcoin-popup {
    display: none;
    margin-top: 1rem;
    margin-inline: auto;
    padding: 1rem;
    background: white;
    border-radius: 0.75rem;
    border: 1px solid #e2e8f0;
    max-width: 400px;
  }

  .donate-bitcoin-popup[aria-hidden="false"] {
    display: block;
    animation: fadeIn 0.2s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .donate-bitcoin-popup__label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #64748b;
    margin-bottom: 0.5rem;
  }

  .donate-bitcoin-popup__address {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 0.5rem;
    padding: 0.75rem;
  }

  .donate-bitcoin-popup__address code {
    flex: 1;
    font-size: 0.8125rem;
    color: #1e293b;
    word-break: break-all;
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }

  .donate-bitcoin-popup__copy {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: all 0.15s ease;
    color: #64748b;
  }

  .donate-bitcoin-popup__copy:hover {
    background: #f1f5f9;
    border-color: #cbd5e1;
    color: #475569;
  }

  .donate-bitcoin-popup__hint {
    font-size: 0.75rem;
    color: #94a3b8;
    margin-top: 0.5rem;
    text-align: center;
  }

  .donate-bitcoin-popup__hint.copied {
    color: #059669;
    font-weight: 500;
  }

  /* Responsive adjustments */
  @media (max-width: 575.98px) {
    .donate-amounts {
      gap: 0.5rem;
    }

    .donate-amount {
      min-width: 3.5rem;
      padding: 0.625rem 1rem;
      font-size: 0.9375rem;
    }

    .donate-providers {
      flex-direction: column;
    }

    .donate-provider {
      width: 100%;
    }
  }

  /* ===========================
   * Mobile Section Spacing
   * =========================== */

  @media (max-width: 767.98px) {
    /* Reduce gap between intro content and video */
    .intro-section {
      padding-top: 2.5rem;
      padding-bottom: 1rem;
    }

    /* Reduce gap before Features section */
    #features .container {
      padding-top: 3rem;
      padding-bottom: 2rem;
    }

    /* Reduce gap around Support section */
    #support-the-project .container {
      padding-top: 2rem;
      padding-bottom: 2rem;
    }

    /* Reduce horizontal margin on tablet */
    .support-box {
      margin-inline: 1rem;
    }
  }

  @media (max-width: 575.98px) {
    /* Further reduce spacing on smallest screens */
    #features .container {
      padding-top: 2rem;
      padding-bottom: 1.5rem;
    }

    #support-the-project .container {
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
    }

    /* Smaller margin on phones */
    .support-box {
      margin-inline: 0.5rem;
    }
  }
</style>
