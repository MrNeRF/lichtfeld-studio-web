# =============================================================================
# LichtFeld Studio Website - Cloudflare Workers Static Assets
# =============================================================================
#
# Pure static site - no Worker script needed.
# Serves pre-built Astro SSG output from the edge.
#
# Deployment:
#   pnpm build && wrangler deploy
#
# Local Development:
#   pnpm build && wrangler dev
#
# =============================================================================

name = "lichtfeld-studio-web"
compatibility_date = "2026-01-28"

# Enable assets_navigation_prefers_asset_serving (default after 2025-04-01)
# This reduces Worker invocations for navigation requests, lowering costs.
# Reference: https://developers.cloudflare.com/workers/configuration/compatibility-flags/
compatibility_flags = ["assets_navigation_prefers_asset_serving"]

# Also serve on workers.dev for testing
workers_dev = true

# -----------------------------------------------------------------------------
# Static Assets Configuration
# -----------------------------------------------------------------------------
# No "main" field - this is a pure static site with no Worker script.
# Reference: https://developers.cloudflare.com/workers/static-assets/

[assets]
directory = "./dist"
not_found_handling = "404-page"
html_handling = "auto-trailing-slash"

# -----------------------------------------------------------------------------
# Routes
# -----------------------------------------------------------------------------
# Catch-all route for the static site.
# The API Worker's more specific route (/api/*) takes precedence.
# Reference: https://developers.cloudflare.com/workers/configuration/routing/routes/

[[routes]]
pattern = "lichtfeld.io/*"
zone_name = "lichtfeld.io"

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
# Enable logging and analytics in the Cloudflare Dashboard.
# Reference: https://developers.cloudflare.com/workers/observability/

[observability]
enabled = true
